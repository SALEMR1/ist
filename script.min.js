document.addEventListener("DOMContentLoaded",function(){"use strict";const e=document.querySelector(".menu-toggle"),t=document.querySelector(".nav-menu"),n=document.getElementById("mobileOverlay"),o=document.body;function i(){t.classList.add("active"),n.classList.add("active");const e=menuToggle.querySelector("i");e.classList.remove("fa-bars"),e.classList.add("fa-times"),o.style.overflow="hidden"}function s(){t.classList.remove("active"),n.classList.remove("active");const e=menuToggle.querySelector("i");e.classList.remove("fa-times"),e.classList.add("fa-bars"),o.style.overflow=""}e&&e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.classList.contains("active")?s():i()}),n&&n.addEventListener("click",function(){s()}),document.addEventListener("click",function(n){t&&t.classList.contains("active")&&!t.contains(n.target)&&!e.contains(n.target)&&s()}),document.querySelectorAll(".nav-menu a").forEach(e=>{e.addEventListener("click",function(){s()})});const a=document.querySelectorAll('a[href^="#"]'),r=document.querySelector("header").offsetHeight;a.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href");if("#"===t)return;const n=document.querySelector(t);n&&window.scrollTo({top:n.offsetTop-r,behavior:"smooth"})})}),a.forEach(e=>{e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.click())})});const c=document.querySelectorAll("section"),l=document.querySelectorAll(".desktop-nav a, .nav-menu a");if("IntersectionObserver"in window){const e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting&&e.intersectionRatio>.5){const t=e.target.getAttribute("id");l.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")==="#"+t&&e.classList.add("active")})}})},{threshold:[.5],rootMargin:"-10% 0px -70% 0px"});c.forEach(t=>e.observe(t))}else{let e=!1;window.addEventListener("scroll",function(){e||(window.requestAnimationFrame(function(){let e=Array.from(c).map(e=>({section:e,offset:Math.abs(e.getBoundingClientRect().top-r)}));e.sort((e,t)=>e.offset-t.offset);const t=e[0].section.getAttribute("id");l.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")==="#"+t&&e.classList.add("active")}),e=!1}),e=!0)},{passive:!0})}const d=document.querySelector(".contact-form form");if(d){const e=d.querySelectorAll("input[required], textarea[required]");e.forEach(e=>{e.setAttribute("aria-required","true")}),d.addEventListener("submit",function(t){t.preventDefault();let n=!0;e.forEach(e=>{if(e.value.trim()){if(e.classList.remove("error"),e.nextElementSibling&&e.nextElementSibling.classList.contains("error-message")&&e.nextElementSibling.remove(),"email"===e.type){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;t.test(e.value.trim())||(n=!1,e.classList.add("error"),e.insertAdjacentHTML("afterend",`<div class="error-message" role="alert">البريد الإلكتروني غير صالح</div>`))}}else n=!1,e.classList.add("error"),e.insertAdjacentHTML("afterend",`<div class="error-message" role="alert">هذا الحقل مطلوب</div>`)}),n&&(this.insertAdjacentHTML("afterend",`<div class="success-message" role="alert">تم إرسال رسالتك بنجاح!</div>`),this.reset(),setTimeout(()=>{document.querySelector(".success-message").remove()},5e3))}),e.forEach(e=>{e.addEventListener("input",function(){this.classList.remove("error");const e=this.nextElementSibling;e&&e.classList.contains("error-message")&&e.remove()})})}function u(){window.requestIdleCallback?requestIdleCallback(()=>{document.querySelectorAll(".department-card a").forEach(e=>{const t=document.createElement("link");t.rel="prefetch",t.href=e.getAttribute("href"),document.head.appendChild(t)})}):setTimeout(()=>{document.querySelectorAll(".department-card a").forEach(e=>{const t=document.createElement("link");t.rel="prefetch",t.href=e.getAttribute("href"),document.head.appendChild(t)})},2e3)}u(),window.addEventListener("load",function(){document.body.classList.add("loaded"),"performance"in window&&window.PerformanceObserver&&function(){try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{["largest-contentful-paint","first-input","layout-shift"].includes(e.entryType)&&console.log(`${e.entryType}: `,e)})});e.observe({entryTypes:["largest-contentful-paint","first-input","layout-shift"]})}catch(e){setTimeout(function(){window.performance.timing&&console.log("Page load time: "+(window.performance.timing.loadEventEnd-window.performance.timing.navigationStart)+"ms")},0)}}()}),function(){const e=document.querySelector("header");e&&e.setAttribute("role","banner");const t=document.querySelector("main")||document.querySelector(".hero");t&&t.setAttribute("role","main");const n=document.querySelector("footer");n&&n.setAttribute("role","contentinfo");const o=document.querySelector("nav");o&&o.setAttribute("role","navigation"),document.querySelectorAll(".btn, .department-card, .facility-item, .course-item, .career-item").forEach(e=>{e.getAttribute("tabindex")||!e.tagName.match(/^(A|BUTTON|INPUT|SELECT|TEXTAREA)$/i)&&e.setAttribute("tabindex","0")})}()});
